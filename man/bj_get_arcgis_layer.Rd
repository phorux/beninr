% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/boundaries.R
\name{bj_get_arcgis_layer}
\alias{bj_get_arcgis_layer}
\title{Download a Layer from ArcGIS Online}
\usage{
bj_get_arcgis_layer(
  item_id,
  layer_index = 0,
  where = "1=1",
  out_fields = "*",
  chunk_size = 1000
)
}
\arguments{
\item{item_id}{\code{character(1)}. The ArcGIS Online item ID, found in the
item page URL after \code{?id=}. Example:
\code{"f1e94d03dd7d44229af3891ad6ce8dfe"}.}

\item{layer_index}{\code{integer(1)}. Zero-based index of the layer within
the Feature Service. Defaults to \code{0} (first layer). Inspect the
\code{/FeatureServer} endpoint to discover available layer indices.}

\item{where}{\code{character(1)}. A SQL \code{WHERE} clause used to filter
features. Defaults to \code{"1=1"} (all features).}

\item{out_fields}{\code{character(1)}. Comma-separated list of field names
to return. Defaults to \code{"*"} (all fields).}

\item{chunk_size}{\code{integer(1)}. Number of features to request per page.
Defaults to \code{1000}. Reduce if the server returns timeout errors.}
}
\value{
An \code{sf} data frame containing all downloaded features, with
geometry and attribute columns as returned by the service.
}
\description{
Retrieves all features from a public ArcGIS Online Feature Service layer.
}
\details{
This function requires a public (unauthenticated) item. For private items,
you must append a valid \code{token} to the query parameters before calling
the REST API.
}
\note{
ArcGIS Online servers typically cap responses at 1,000-2,000 records per
request. The \code{chunk_size} argument should not exceed the server's
\code{maxRecordCount}, which can be found in the layer's JSON metadata at
\code{/FeatureServer/<layer_index>?f=json}.
}
\examples{
\dontrun{
# Download all features from the first layer
layer_sf <- bj_get_arcgis_layer(
  item_id = "f1e94d03dd7d44229af3891ad6ce8dfe"
)

# Inspect result
print(layer_sf)
sf::st_crs(layer_sf)

# Save to GeoPackage
sf::st_write(layer_sf, "output_layer.gpkg")
}

}
\seealso{
Wrapper functions for specific Benin datasets:
\itemize{
\item \code{\link[=bj_get_country]{bj_get_country()}} - National boundary
\item \code{\link[=bj_get_departements]{bj_get_departements()}} - Departments (12)
\item \code{\link[=bj_get_arrondissements]{bj_get_arrondissements()}} - Arrondissements (546)
\item \code{\link[=bj_get_villages]{bj_get_villages()}} - Villages and localities
\item \code{\link[=bj_get_zones_sanitaires]{bj_get_zones_sanitaires()}} - Health zones
\item \href{https://developers.arcgis.com/rest/services-reference/enterprise/query-feature-service-layer/}{ArcGIS REST API - Query (Feature Service/Layer)}
}
}
